import React, { useState } from 'react';
import { Box, Button, Paper, Typography, Popover } from '@mui/material';
import EmojiEmotionsIcon from '@mui/icons-material/EmojiEmotions';

interface EmojiPickerProps {
  onEmojiSelect: (emoji: string) => void;
}

const EmojiPicker: React.FC<EmojiPickerProps> = ({ onEmojiSelect }) => {
  const [anchorEl, setAnchorEl] = useState<HTMLButtonElement | null>(null);

  const handleClick = (event: React.MouseEvent<HTMLButtonElement>) => {
    setAnchorEl(event.currentTarget);
  };

  const handleClose = () => {
    setAnchorEl(null);
  };

  const handleEmojiClick = (emoji: string) => {
    onEmojiSelect(emoji);
    handleClose();
  };

  const open = Boolean(anchorEl);
  const id = open ? 'emoji-popover' : undefined;

  const emojis = [
    'ğŸ˜€', 'ğŸ˜', 'ğŸ˜‚', 'ğŸ˜ƒ', 'ğŸ˜‰', 'ğŸ˜‹', 'ğŸ˜', 'ğŸ˜', 'ğŸ˜—', 'ğŸ¤—', 'ğŸ¤”', 'ğŸ˜£', 'ğŸ˜«', 'ğŸ˜´', 'ğŸ˜Œ', 'ğŸ¤“',
    'ğŸ˜›', 'ğŸ˜œ', 'ğŸ˜ ', 'ğŸ˜‡', 'ğŸ˜·', 'ğŸ˜ˆ', 'ğŸ‘»', 'ğŸ˜º', 'ğŸ˜¸', 'ğŸ˜¹', 'ğŸ˜»', 'ğŸ˜¼', 'ğŸ˜½', 'ğŸ™€', 'ğŸ™ˆ',
    'ğŸ™‰', 'ğŸ™Š', 'ğŸ‘¼', 'ğŸ‘®', 'ğŸ•µ', 'ğŸ’‚', 'ğŸ‘³', 'ğŸ…', 'ğŸ‘¸', 'ğŸ‘°', 'ğŸ‘²', 'ğŸ™', 'ğŸ™‡', 'ğŸš¶', 'ğŸƒ', 'ğŸ’ƒ',
    'â›·', 'ğŸ‚', 'ğŸŒ', 'ğŸ„', 'ğŸš£', 'ğŸŠ', 'â›¹', 'ğŸ‹', 'ğŸš´', 'ğŸ‘«', 'ğŸ’ª', 'ğŸ‘ˆ', 'ğŸ‘‰', 'ğŸ‘‰', 'ğŸ‘†', 'ğŸ–•',
    'ğŸ‘‡', 'ğŸ––', 'ğŸ¤˜', 'ğŸ–', 'ğŸ‘Œ', 'ğŸ‘', 'ğŸ‘', 'âœŠ', 'ğŸ‘Š', 'ğŸ‘', 'ğŸ™Œ', 'ğŸ™', 'ğŸµ', 'ğŸ¶', 'ğŸ‡', 'ğŸ¥',
    'ğŸ¸', 'ğŸŒ', 'ğŸ›', 'ğŸœ', 'ğŸ', 'ğŸ‰', 'ğŸ„', 'ğŸ”', 'ğŸ¤', 'ğŸ¨', 'ğŸª', 'ğŸ‚', 'ğŸ°', 'ğŸ¾', 'ğŸ·', 'ğŸ¸',
    'ğŸº', 'ğŸŒ', 'ğŸš‘', 'â°', 'ğŸŒ™', 'ğŸŒ', 'ğŸŒ', 'â­', 'ğŸŒŸ', 'ğŸŒ ', 'ğŸŒ¨', 'ğŸŒ©', 'â›„', 'ğŸ”¥', 'ğŸ„', 'ğŸˆ',
    'ğŸ‰', 'ğŸŠ', 'ğŸ', 'ğŸ—', 'ğŸ€', 'ğŸˆ', 'ğŸ²', 'ğŸ”‡', 'ğŸ”ˆ', 'ğŸ“£', 'ğŸ””', 'ğŸµ', 'ğŸ·', 'ğŸ’°', 'ğŸ–Š', 'ğŸ“…',
    'âœ…', 'â', 'ğŸ’¯',
  ];

  return (
    <Box>
      <Button 
        variant="text"
        color="primary"
        onClick={handleClick}
        startIcon={<EmojiEmotionsIcon />}
      >
        Emojis
      </Button>
      <Popover
        id={id}
        open={open}
        anchorEl={anchorEl}
        onClose={handleClose}
        anchorOrigin={{
          vertical: 'bottom',
          horizontal: 'left',
        }}
        transformOrigin={{
          vertical: 'top',
          horizontal: 'left',
        }}
      >
        <Paper sx={{ p: 2, maxWidth: 300, maxHeight: 300, overflow: 'auto' }}>
          <Typography variant="subtitle2" gutterBottom>
            Select an emoji
          </Typography>
          <Box sx={{ display: 'flex', flexWrap: 'wrap', gap: 1 }}>
            {emojis.map((emoji, index) => (
              <Box 
                key={index} 
                sx={{ 
                  fontSize: '24px', 
                  cursor: 'pointer',
                  padding: '4px',
                  borderRadius: '4px',
                  '&:hover': { 
                    backgroundColor: 'rgba(0, 0, 0, 0.05)' 
                  }
                }}
                onClick={() => handleEmojiClick(emoji)}
              >
                {emoji}
              </Box>
            ))}
          </Box>
        </Paper>
      </Popover>
    </Box>
  );
};

export default EmojiPicker;
